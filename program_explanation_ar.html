<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تطبيق AuraMixer - شرح البرنامج</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1, h2, h3 {
            color: #0056b3;
        }
        ul {
            list-style-type: disc;
            margin-right: 20px; /* For RTL */
            margin-left: 0;
        }
        code {
            background-color: #eef;
            padding: 2px 4px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>تطبيق AuraMixer - شرح البرنامج</h1>
        <p>يقدم هذا المستند شرحًا شاملاً لتطبيق AuraMixer، وظائفه، وكيفية عمله.</p>

        <h2>ما هو تطبيق AuraMixer؟</h2>
        <p>تطبيق AuraMixer هو أداة بسيطة وتفاعلية مبنية باستخدام مكتبة Pygame في بايثون. يسمح للمستخدمين بتشغيل ملفات صوتية متنوعة (مقاطع موسيقية وأصوات صراخ) ويتميز بخلفيات صور ديناميكية، وكل ذلك يتم التحكم فيه عبر مدخلات لوحة المفاتيح. تم تصميمه ليكون بديهيًا وجذابًا بصريًا.</p>

        <h2>الوظائف الرئيسية</h2>
        <ul>
            <li><strong>تشغيل الموسيقى مع التلاشي المتداخل:</strong> يكتشف التطبيق تلقائيًا ويحمل ملفات الموسيقى بصيغة <code>.wav</code> أو <code>.mp3</code> من مجلد فرعي مخصص <code>music/</code>. يتم ربط كل مقطع بمفتاح رقمي فريد (1-0 على الصف العلوي ولوحة الأرقام). عند الضغط على مفتاح الموسيقى، يبدأ المقطع المقابل في التشغيل. إذا كان مقطع آخر قيد التشغيل بالفعل، يتلاشى المقطع السابق بسلاسة بينما يتلاشى المقطع الجديد في نفس الوقت، مما يضمن انتقالًا سلسًا بدون أي صمت. تستمر المقاطع الموسيقية في التكرار إلى أجل غير مسمى بمجرد بدئها.</li>
            <li><strong>تشغيل أصوات المؤثرات:</strong> على غرار الموسيقى، يقوم التطبيق بتحميل أصوات المؤثرات بصيغة <code>.wav</code> أو <code>.mp3</code> من مجلد فرعي <code>effects/</code>. يتم ربط كل مفتاح أبجدي (A-Z) بصوت مؤثر محدد، مما يضمن أن الضغط على نفس المفتاح يشغل دائمًا نفس الصوت.</li>
            <li><strong>الخلفيات الديناميكية:</strong> يقوم التطبيق بتحميل صور <code>.png</code> أو <code>.jpg</code> أو <code>.jpeg</code> من مجلد فرعي <code>backgrounds/</code>. يتم تغيير حجم هذه الصور لتغطية الشاشة بأكملها، على غرار خاصية <code>background-size: cover</code> في CSS، مما يضمن عدم وجود تشويه. تتغير صور الخلفية تلقائيًا كل 10 ثوانٍ مع انتقال تلاشي سلس بينها.</li>
            <li><strong>إيقاف شامل:</strong> يؤدي الضغط على مفتاح المسافة (Spacebar) إلى إيقاف جميع الموسيقى وأصوات الصراخ التي يتم تشغيلها حاليًا على الفور.</li>
            <li><strong>واجهة المستخدم الرسومية (GUI):</strong> يتم توفير واجهة مستخدم رسومية بسيطة، تعرض صورة الخلفية الحالية وتشير إلى تعيينات المفاتيح للموسيقى وأصوات الصراخ.</li>
            <li><strong>معالجة الأخطاء:</strong> يتعامل البرنامج بأناقة مع السيناريوهات التي تكون فيها مجلدات <code>music/</code> أو <code>effects/</code> أو <code>backgrounds/</code> مفقودة أو فارغة، مما يمنع الأعطال ويوفر رسائل إعلامية.</li>
        </ul>

        <h2>كيف يعمل (نظرة عامة فنية)</h2>
        <p>يستفيد التطبيق من مكتبة Pygame لوظائفه الأساسية:</p>
        <ul>
            <li><strong>التهيئة:</strong> يتم تهيئة وحدات Pygame، وخاصة وحدة المزج للصوت، عند بدء التشغيل.</li>
            <li><strong>تحميل الأصول:</strong>
                <ul>
                    <li><strong>الصوت:</strong> يقوم بمسح المجلدات الفرعية المحددة (<code>music/</code>، <code>effects/</code>) بحثًا عن ملفات صوتية متوافقة. يتم إدارة ملفات الموسيقى بواسطة كائنين <code>pygame.mixer.Channel</code> لتمكين التلاشي المتداخل، بينما يتم تحميل أصوات المؤثرات إلى كائنات <code>pygame.mixer.Sound</code> للتشغيل السريع.</li>
                    <li><strong>الصور:</strong> يتم تحميل صور الخلفية، ويتم تطبيق منطق تغيير حجم مخصص لضمان أنها تملأ الشاشة مع الحفاظ على نسبة العرض إلى الارتفاع.</li>
                </ul>
            </li>
            <li><strong>حلقة الأحداث:</strong> قلب التطبيق هو حلقة مستمرة تستمع إلى مدخلات المستخدم (ضغوطات لوحة المفاتيح) وأحداث النظام (مثل إغلاق النافذة أو مؤقت تغيير الخلفية).</li>
            <li><strong>معالجة مدخلات لوحة المفاتيح:</strong>
                <ul>
                    <li>تؤدي ضغوطات المفاتيح الرقمية إلى تشغيل دالة <code>play_music()</code>، التي تتعامل مع تلاشي المقطع الحالي وبدء المقطع الجديد في حلقة مع تلاشي متداخل.</li>
                    <li>تؤدي ضغوطات المفاتيح الأبجدية إلى تشغيل دالة <code>play_scream()</code>، وتشغيل صوت الصراخ المعين مسبقًا.</li>
                    <li>يؤدي مفتاح المسافة إلى تشغيل دالة <code>stop_all_sounds()</code>.</li>
                </ul>
            </li>
            <li><strong>انتقال الخلفية:</strong> يتم إعداد حدث Pygame مخصص ليتم تشغيله بشكل دوري. عند تشغيله، يبدأ انتقال تلاشي بين صورة الخلفية الحالية والصورة التالية في القائمة المحملة. يتم تحقيق ذلك عن طريق رسم كلتا الصورتين بقيم ألفا (الشفافية) المتغيرة ديناميكيًا.</li>
            <li><strong>التقديم (Rendering):</strong> في كل إطار من الحلقة، يتم رسم صورة الخلفية الحالية (أو انتقال التلاشي)، تليها تراكبات النص التي تعرض تعيينات المفاتيح والتعليمات.</li>
        </ul>

        <h2>هيكل الملفات</h2>
        <p>يتوقع البرنامج هيكل الدليل التالي:</p>
        <pre>.
├── auramixer.py
├── music/
│   ├── your_music_file1.mp3
│   └── your_music_file2.wav
├── effects/
│   ├── your_scream_file1.wav
│   └── your_scream_file2.mp3
└── backgrounds/
    ├── your_background_image1.png
    └── your_background_image2.jpg
</pre>
    </div>
</body>
</html>
